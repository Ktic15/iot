{% extends "layout.html" %}
{% block body %}
<link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/bootstrap.min.css') }}">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.1/css/bootstrap-select.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.1/js/bootstrap-select.js"></script>

<!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>-->
<!--<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>-->


</nav>
<div class="row"><div class="col-lg-3"><h2>Report Generation</h2></div></div>
<div class="row">
    <div class="col-lg-3">

        <div class="card card-body">
            <form action="/employees_report" method="POST">
                <h2> Set Filter </h2>

                <div class="form-group">
                    <label>Operator id:</label><br>
                    <select id="employeeCode" data-live-search="true" class="selectpicker" class="form-control" name='employeeCode' required>
                        <option value="all" > ALL </option>
                        {% for item in employeesItem %}
                            <option value="{{ item.employee_code }}" >{{ item.employee_code }} / {{ item.employee_name}} </option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group">
                    <label>Machine id:</label><br>
                    <select id="machineCode" data-live-search="true" class="selectpicker"  name='machineCode' class="form-control" required>
                        <option value="all" > ALL </option>
                        {% for item in machinesItem %}
                        <option value="{{ item.mno }}" >{{ item.mno }} / {{ item.mname}} </option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group">
                    <label>Supervisor id:</label><br>
                    <select id="supervisorCode" data-live-search="true" class="selectpicker"  name='supervisorCode' class="form-control" required>
                        <option value="all" > ALL </option>
                        {% for item in supervisorsItem %}
                        <option value="{{ item.employee_code }}" >{{ item.employee_code }} / {{ item.employee_name}} </option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group">
                    <label>Part id:</label><br>
                    <select id="partCode" data-live-search="true" class="selectpicker" name='partCode' class="form-control" required>
                        <option value="all" > ALL </option>
                        {% for item in partsItem %}
                        <option value="{{ item.pcode }}" >{{ item.pcode }} / {{ item.pdes}} </option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group">
                    <label>From Date:</label>
                    <input type="date" id="fromDate" name="fromDate"class="form-control" required>
                </div>
                <div class="form-group">
                    <label>To Date:</label>
                    <input type="date" id="toDate" name="toDate"class="form-control" required>
                </div>
                <div class="form-group">
                    <label>Shift:</label>
                    <select id="shiftCode" name="shiftCode"class="form-control" required>
                        <option value="all" > ALL </option>
                        {% for item in shiftItem %}
                            <option value="{{ item.scode }}" >{{ item.scode }} </option>
                        {% endfor %}
                    </select>
                </div>
                {%if list_data!=[] %}
                    <div class="form-group">
                        <label>Export as PDF: </label>
                        <input id="export_pdf" name="export_pdf" type="checkbox">
                    </div>
                {%endif%}
                <button class="btn btn-primary btn-block" name="save">
                    Generate Report
                </button>
                <button class="btn btn-primary btn-block" name="export" onclick="exportCheck()">
                    export
                </button>
                <button class="btn btn-primary btn-block" name="reset" onclick="exportReset()">
                    reset
                </button>
                <br>
                <br>
            </form>

        </div>
    </div>
    <div class="col-md-8">
        <table id="dtable" class="table table-striped table-bordered" style="width:100%">
            <thead>
            <tr>
                <td>Sno</td>
                {% for row in columns %}
                <td>{{row}}</td>
                {% endfor %}
            </tr>
            </thead>
            <tbody>
            {% for rows in list_data %}
            <tr>
                <td>{{loop.index}}</td>
                {% for row in rows %}
                <td>{{row}}</td>
                {% endfor %}
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>
</div>
<script>
var status = '{{status}}';
if (status!=""){
    alert(status);
}

'{% for name,value in userInput.items() %}'
    console.log('{{name}}:{{value}}');
   document.getElementById('{{name}}').value='{{value}}';
'{% endfor %}'

function exportCheck(){
    if ('{{list_data}}'=='[]'){
        event.preventDefault();
        alert("No date to export. Please generate the report");
    }
}

function exportReset(){
    if(!confirm("Are you sure to reset. All the generated data will lost")){
        event.preventDefault();
    }
}
   $(document).ready(function() {
      $( '#nav-header' ).find( 'li.active' ).removeClass( 'active' );
      $('#nav_report').addClass( 'active' );
    });
</script>


{% endblock %}